{% extends 'base.html' %}
{% block content %}
  <h2>Admin Dashboard</h2>
  <p><a href="/admin/logout">Logout</a></p>
  <table class="table">
    <thead><tr><th>Date</th><th>Time</th><th>Customer</th><th>Service</th><th>Paid</th><th>Status</th><th>Actions</th></tr></thead>
    <tbody>
      {% for b in bookings %}
        <tr id="b{{ b.id }}">
          <td>{{ b.date }}</td>
          <td>{{ b.time }}</td>
          <td>{{ b.customer_name }}<br>{{ b.phone }}</td>
          <td>{{ b.service }}</td>
          <td>{{ 'Yes' if b.paid else 'No' }}</td>
          <td class="status">{{ b.status }}</td>
          <td>
            <form method="post" action="/admin/action/{{ b.id }}" style="display:inline">
              <input type="hidden" name="action" value="approve">
              <button class="btn small" type="submit" {% if b.status=='approved' %}disabled{% endif %}>Approve</button>
            </form>
            <form method="post" action="/admin/action/{{ b.id }}" style="display:inline">
              <input type="hidden" name="action" value="reject">
              <button class="btn small" type="submit" {% if b.status=='rejected' %}disabled{% endif %}>Reject</button>
            </form>
            <form method="post" action="/admin/action/{{ b.id }}" style="display:inline">
              <input type="hidden" name="action" value="complete">
              <button class="btn small" type="submit" {% if b.status=='completed' %}disabled{% endif %}>Complete</button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
